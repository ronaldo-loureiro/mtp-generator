<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>MTP-Generator</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet"/>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" rel="stylesheet"/>
    <!-- MDB -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/4.3.0/mdb.min.css" rel="stylesheet"/>


    <link rel="stylesheet" href="/style.scss"/>
</head>
<body>
<div class="container">
    <h1 class="text-center">MTP-Generator</h1>

    <form action="#" th:action="@{/mtp}" th:object="${mtp}" method="post">
        <div class="row my-4">
            <div class="col">
                <div class="form-outline">
                    <input type="text" id="input-uuid" th:field="*{uuid}" class="form-control" required/>
                    <label class="form-label" for="input-uuid">UUID</label>
                </div>
            </div>
            <div class="col text-center">
                <div class="form-check form-check-inline" th:each="model : ${T(ch.hug.mtpgenerator.models.enums.MtpType).values()}">
                    <input class="form-check-input" type="radio" th:field="*{mtp_type}" th:value="${model}" th:onclick="'changeMtpType(this.value);'"/>
                    <label class="form-check-label" th:for="${#ids.prev('mtp_type')}" th:text="${model}"></label>
                </div>
            </div>
        </div>

        <div id="structured-instructions-inputs">
            <div class="row my-4">
                <div class="col">
                    <div class="form-outline">
                        <input type="date" th:field="*{start_date}" class="form-control"/>
                        <label class="form-label" th:for="*{start_date}">Start Date (optional)</label>
                    </div>
                </div>
                <div class="col">
                    <div class="form-outline">
                        <input type="date" th:field="*{stop_date}" class="form-control"/>
                        <label class="form-label" th:for="*{stop_date}">Stop Date (optional)</label>
                    </div>
                </div>
            </div>

            <div class="row my-4">
                <div class="col">
                    <div class="form-outline">
                        <input type="number" th:field="*{repeat_number}" class="form-control" min="-1"/>
                        <label class="form-label" th:for="*{repeat_number}">Repeat number</label>
                    </div>
                    <div id="text-repeat-number" class="form-text">
                        The value -1 refers to nullFlavor=NI
                    </div>
                </div>
                <div class="col">
                    <h6 th:for="*{route_code}">Route code</h6>
                    <div class="">
                        <select th:field="*{route_code}" class="" >
                            <option th:each="model : ${routeOfAdministrationAmbu}" th:value="${model}" th:text="${model.getDisplayName()}">
                            </option>
                        </select>
                    </div>
                </div>
            </div>

            <div class="col-md-6 col-xs-12 my-4">
                <h6>Dose quantity unit</h6>
                <select th:field="*{dose_quantity_unit}" class="" >
                    <option th:each="model : ${regularUnitCodeAmbu}" th:value="${model}" th:text="${model.getDisplayName()}">
                    </option>
                </select>
            </div>

            <div class="row">
                <h6>Dose quantity</h6>

                <div class="col" th:each="dose : ${mtp.getDoses_quantity()}">
                    <div class="form-outline">
                        <input type="text" th:value="${dose.value}" th:field="${mtp.doses_quantity[__${dose.key}__]}" class="form-control"/>
                        <label class="form-label" th:for="${mtp.doses_quantity[__${dose.key}__]}" th:text="${dose.key}"></label>
                    </div>
                </div>

            </div>
        </div>

        <div class="form-outline my-4" id="narrative-instructions-inputs" style="display: none;">
            <textarea class="form-control" th:field="*{narrative_instructions}" rows="4"></textarea>
            <label class="form-label" th:for="*{narrative_instructions}">Narrative instructions</label>
        </div>

        <div class="row my-4">
            <div class="col text-center">
                <div class="form-check form-check-inline" th:each="model : ${T(ch.hug.mtpgenerator.models.enums.ProductCodeType).values()}">
                    <input class="form-check-input" type="radio" th:field="*{product_code_type}" th:value="${model}"/>
                    <label class="form-check-label" th:for="${#ids.prev('product_code_type')}" th:text="${model}"></label>
                </div>
            </div>

            <div class="col">
                <div class="form-outline">
                    <input type="text" th:field="*{product_code}" class="form-control" required/>
                    <label class="form-label" th:for="*{product_code}">Code</label>
                </div>
            </div>
        </div>

        <div class="row my-4">
            <div class="col">
                <div class="form-outline">
                    <input type="text" th:field="*{product_name}" class="form-control" required/>
                    <label class="form-label">Product name</label>
                </div>
            </div>
            <div class="col">
                <div class="">
                    <h6>Form code</h6>
                    <select th:field="*{form_code}" class="select" >
                        <option th:each="model : ${pharmaceuticalDoseFormEdqm}" th:value="${model}" th:text="${model.getDisplayName()}">
                        </option>
                    </select>
                </div>
            </div>
        </div>

        <div class="form-outline my-4">
            <textarea class="form-control" th:field="*{fulfillment_instruction}" rows="4"></textarea>
            <label class="form-label" th:for="*{fulfillment_instruction}">Fulfillment instruction (optional)</label>
        </div>

        <div class="form-outline my-4">
            <textarea class="form-control" th:field="*{reason}" rows="4"></textarea>
            <label class="form-label" th:for="*{reason}">Reason (optional)</label>
        </div>

        <div class="row my-4">
            <div class="col">
                <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" role="switch" th:field="*{in_reserve}" />
                    <label class="form-check-label" th:for="*{in_reserve}">In reserve</label>
                </div>
            </div>
            <div class="col">
                <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" role="switch" th:field="*{substitution_authorized}"/>
                    <label class="form-check-label" th:for="*{substitution_authorized}">Substitution authorized</label>
                </div>
            </div>
        </div>

        <div class="row my-4">
            <div class="col">
                <div class="form-outline">
                    <input type="text" th:field="*{amount_to_dispense}" class="form-control"/>
                    <label class="form-label" th:for="*{amount_to_dispense}">Amount to dispense (optional)</label>
                </div>
            </div>
        </div>

        <div class="row my-4">
            <div class="col">
                <button type="submit" class="btn btn-outline-primary col-12" data-mdb-ripple-color="dark">Create the document MTP</button>
            </div>
        </div>
    </form>

    <div class="alert alert-danger" role="alert" data-mdb-color="danger" th:if="*{errorMessage != null}">
        <i class="fas fa-times-circle me-3"></i>[[${errorMessage}]]
    </div>
</div>

<!-- MDB -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/4.3.0/mdb.min.js"></script>
<script type="application/javascript" src="/js/home.js"></script>
</body>
</html>